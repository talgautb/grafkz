$(document).ready(function(){function t(){function t(t){return t.pm=+t.pm,t}var e={top:20,right:20,bottom:30,left:40},n=720-e.left-e.right,a=400-e.top-e.bottom,r=d3.scale.ordinal().rangeRoundBands([0,n],.1),i=d3.scale.linear().range([a,0]),l=d3.svg.axis().scale(r).orient("bottom"),o=d3.svg.axis().scale(i).orient("left"),s=d3.scale.linear().domain([0,10*.33,10*.66,10]).range(["#37bc9b","#ed5565","#4a89dc","#f6bb42"]),c=(d3.scale.linear().range([0,n]),d3.scale.linear().range([a,0]),d3.svg.line().x(function(t){return r(t.year)}).y(function(t){return i(t.pm)}),d3.svg.line().x(function(t){return r(t.year)}).y(function(t){return i(0)}),d3.select("#maternal-mortality").append("svg").attr("width",n+e.left+e.right).attr("height",a+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"));d3.tsv("data.tsv",t,function(t,e){r.domain(e.map(function(t){return t.year})),i.domain([0,d3.max(e,function(t){return t.pm})]),c.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+a+")").call(l).append("text").attr("y",19).attr("x",n-10).text("year");var d=c.append("svg:text").attr("class","text").attr("dx","20px").attr("dy","-5px");c.append("g").attr("class","axis axis--y").call(o).append("text").attr("y",-15).attr("x",-10).attr("dy",".71em").style("text-anchor","end").text("â€°"),c.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").style({fill:function(t,e){return s(e)},opacity:"0.66"}).attr("height",function(t){return a-i(t.pm)}).attr("x",function(t){return r(t.year)}).attr("width",r.rangeBand()).attr("y",function(t){return i(t.pm)-500}).attr("height",function(t){return a-i(t.pm)}).on("mouseover",function(t,e,n){d.attr("x",r(t.year)).attr("y",i(t.pm)).text(t.pm).style({visibility:"visible",opacity:1})}).on("mouseout",function(){d.style({visibility:"hidden",opacity:0})}).transition().attr("y",function(t){return i(t.pm)}).delay(function(t,e){return 80*e}).duration(1500).ease("elastic-out-in")})}var e=function(){var t,e={top:30,right:10,bottom:30,left:50},n=[10.4,10.4,10.4,10.4,10.5,10.5,10.4,16.8,17,17.8,17.8,17.8,23.8,26.2],a=400-e.top-e.bottom,r=720-e.left-e.right,i=[2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013],l=d3.scale.linear().domain([0,d3.max(n)]).range([0,a]),o=d3.scale.ordinal().domain(d3.range(0,n.length)).rangeBands([0,r]),s=d3.scale.linear().domain([0,.33*n.length,.66*n.length,n.length]).range(["#d6e9c6","#bce8f1","#faebcc","#ebccd1"]),c=d3.select("#women-parliament").append("svg").attr("width",r+e.left+e.right).attr("height",a+e.top+e.bottom).style("background","#fff").append("g").attr("transform","translate("+e.left+", "+e.top+")").selectAll("rect").data(n).enter().append("rect").style({fill:function(t,e){return s(e)},stroke:"#fff","stroke-width":"1"}).attr("width",o.rangeBand()).attr("height",0).attr("x",function(t,e){return o(e)}).attr("y",function(t){return a-l(t)}).attr("height",0).attr("y",a).on("mouseover",function(e){t=this.style.fill,d3.select(this).style("fill","#ccc")}).on("mouseout",function(e){d3.select(this).style("fill",t)});c.transition().attr("height",function(t){return l(t)}).attr("y",function(t){return a-l(t)}).delay(function(t,e){return 40*e}).duration(2e3).ease("elastic-in");var d=d3.scale.linear().domain([0,d3.max(n)]).range([a,0]),u=d3.svg.axis().scale(d).orient("left").ticks(10).tickFormat(function(t){return t+"%"}),f=d3.select("svg").append("g");u(f),f.attr("transform","translate("+e.left+", "+e.top+")"),f.selectAll("path").style({fill:"none",stroke:"#3c763d"}),f.selectAll("line").style({stroke:"#3c763d"});var p=d3.svg.axis().scale(o).orient("bottom").tickFormat(function(t){return i[t]}),g=d3.select("svg").append("g");p(g),g.attr("transform","translate("+e.left+", "+(a+e.top)+")"),g.selectAll("path").style({fill:"none",stroke:"#3c763d"}),g.selectAll("line").style({stroke:"#3c763d"})};e(),t()});